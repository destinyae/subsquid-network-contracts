FROM ghcr.io/foundry-rs/foundry:latest

WORKDIR /usr/src/app

RUN apk add jq python3 py3-pip
RUN pip install base58
COPY foundry.toml ./foundry.toml
RUN forge install foundry-rs/forge-std OpenZeppelin/openzeppelin-contracts --no-git
COPY . .
RUN forge build

